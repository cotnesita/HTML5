DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>
            Canvas
        </title>
    </head>
    <style>
        * {
            padding: 0;
            border: 0;
        }
        canvas {
            height: 200;
            width: 350px;
            border: 2px solid black;
        }
            
        #canva_1 {
            border: 2px dotted purple;
        }
        .simple {
            background: #d2d3fa;
        }
        .paths {
            background: whitesmoke;
        }
        .textos {
            background-color: #d2fad7;
           
        }
        .gradientes {
            background: linear-gradient(90deg , purple , orange ,blue, yellow , #b130d1);
        }
        .imagenes {
            background-color: pink;
        }
        #img_imge {
            display: none;
        } 
        .large-header {
            position: relative;
            width: 50%;
            background: #333;
            overflow: hidden;
            background-size: cover;
            background-position: center center;
            z-index: 1;
        }
        #large-header {
            background-image: url('https://www.marcoguglie.it/Codepen/AnimatedHeaderBg/demo-1/img/demo-1-bg.jpg');
        }
        .main-title {
            position: absolute;
            margin: 0;
            padding: 0;
            color: #f9f1e9;
            text-align: center;
            top: 50%;
            left: 50%;
            -webkit-transform: translate3d(-50%,-50%,0);
            transform: translate3d(-50%,-50%,0);
        }
        .demo-1 .main-title {
            text-transform: uppercase;
            font-size: 4.2em;
            letter-spacing: 0.1em;
        }
        .main-title .thin {
            font-weight: 100;
        }
        @media only screen and (max-width : 300px) {
            .demo-1 .main-title {
                font-size: 3em;
            }
        }
            
    </style>
    <body>

        <div 
             class="simple"
        >
            <h1>
                Simple Shapes
            </h1>
            <h3>
                Canvas con bordes
            </h3>
            <p>
                <canvas 
                        id="canvas"
                />
                
            </p>
            <p>
                <canvas 
                        id="canva_1"
                />
            </p>
            <h3>
                Canva con evento "onclick" y fillRect
            </h3>
            <p>
                <canvas 
                        id="canva_identificado"
                        onclick="dibujaforma()"
                />
            </p>
            <h3>
                Canva con fillStyle
            </h3>
            <p>
                <canvas 
                        id="canva_identificado_2" 
                        onclick="dibujaforma_2()" 
                />
            </p>
            <h3>
                Canva con strokeStyle y strokeRect    
            </h3>
            <p>
                <canvas 
                        id="canva_identificado_3" 
                        onclick="dibujaforma_3()"
                />
            </p>
            <h3>
                Canva con clearRect(1 click para aparecer, 2 clicks continuos para limpiar)
            </h3>
            <p>
                <canvas 
                        id="canva_identificado_4" 
                        onclick="dibujaforma_4()" 
                        ondblclick="limpiarforma()"
                />
            </p>   
        </div>    
        <div 
             class="paths"
        >
            <h1>
                Paths
            </h1>
            <h3>
                Canva con dibujo de linea
            </h3>
            <p>
                <canvas 
                        id="canva_lineas" 
                        onclick="dibuja_linea1()"
                />
                
            </p>
            <h3>
                 Dibujo de linea sin patron alguno
            </h3>
            <p>
                <canvas 
                        id="canva_l_libre" 
                        onclick="lineas_libres()"
                />  
            </p>
            <h3>
                Lineas con diferentes "Paths"
            </h3>
            <p>
                <canvas 
                        id="canva_path" 
                        onclick="lineas_colores()"
                />   
                
            </p>
            <h3>
                Ejemplo del libro 
            </h3>
            <p>
                <canvas 
                        id="ejemplo_path" 
                        onclick="ejemplo()"
                />
                
            </p>
        </div>
        <div 
             class="textos"
        >
            <h1>
                Textos
            </h1>
            <h3>
                Canva con textos y fuentes
            </h3>
            <p>
                <canvas 
                        id="font_text" 
                        onclick="fuentes()"
                />
            </p>
        </div>
        <div 
             class="gradientes"
        >
            <h1>
                Degradados
            </h1>
            <p>
                <canvas 
                        id="gradi" 
                        onclick="gradie()"
                />
            </p>

        </div>
        <div 
             class="imagenes"
        >
            <h1>
                Imagenes
            </h1>
            <h3>
                Imagen con elemento "img"
            </h3>
            <p>
                <img 
                     width="100" 
                     height="100" 
                     src="IMAGENES/DIA DE MUERTOS.jpg" 
                     id="imge"
                >
                <canvas 
                        id="imagen"
                />
                 
            </p>
            <h3>Imagen repetida</h3>
            <p>
                <canvas 
                        id="img_imge"
                />    
            </p>
            <p>
                <canvas 
                        id="img_repetida"
                />
            </p>
        </div>
        <div id="large-header" class="large-header">
            <canvas id="demo-canvas"></canvas>
              <h1 class="main-title">Connect <span class="thin">Three</span></h1>
          </div>
        <script>
                function dibujaforma(){
                    var canva_i= document.getElementById("canva_identificado");
                    var contexto_c=canva_i.getContext("2d");

                    contexto_c.fillRect(50,25,150,100);
                }
                function dibujaforma_2(){
                    var canva_i= document.getElementById("canva_identificado_2");
                    var contexto_c=canva_i.getContext("2d");
                    contexto_c.fillStyle="blue";
                    contexto_c.fillRect(50,25,150,100);
                }
                function dibujaforma_3(){
                    var canva_i= document.getElementById("canva_identificado_3");
                    var contexto_c=canva_i.getContext("2d");
                    contexto_c.strokeStyle="blue";
                    contexto_c.strokeRect(50,25,150,100);
                }
                function dibujaforma_4(){
                    var canva_i= document.getElementById("canva_identificado_4");
                    var contexto_c=canva_i.getContext("2d");
                    contexto_c.fillStyle="blue";
                    contexto_c.fillRect(50,25,150,100);
                }
                function limpiarforma(){
                    var canva_i= document.getElementById("canva_identificado_4");
                    var contexto_c=canva_i.getContext("2d");
                    contexto_c.clearRect(50,25,150,100);
                }
            
                window.onload = function a(){
                        var can1 =document.getElementById("imagen");
                        var can2 = can1.getContext("2d");
                        var canimg = document.getElementById("imge");
                        can2.drawImage(imge , 100 , 25 ,100 , 100);
                    };  
                    var conva= document.getElementById("img_imge");
                    var conva1=conva.getContext("2d");
                    var bwu=new Image();
                    bwu.src="IMAGENES/DIA DE MUERTOS.jpg"
                    bwu.onload= function b(){
                        cox.drawImage(bwu , 100, 25 ,100 ,100);        
                        cox.drawImage(bwu , 100, 25 ,100 ,100);        
                    };
                    var cumba=document.getElementById("img_repetida");
                    var cumba1=cumba.getContext("2d");
                    bwu.onload = function c (){
                        for(var x=0 , y=0; x < 300 && y < 255 ;x += 50 , y += 30 ){
                            cumba1.drawImage(bwu,x,y,50,50);
                        }
                    }; 
            
                function gradie(){
                    var can = document.getElementById("gradi");
                    var cox = can.getContext("2d");
                    var degradado = cox.createLinearGradient(0,0 ,300,0);
                    degradado.addColorStop(0,"black");
                    degradado.addColorStop(1,"white");
                    cox.fillStyle = degradado;
                    cox.fillRect(0,0,300,225);
                }
                function dibuja_linea1(){
                    var canva= document.getElementById("canva_lineas");
                    var can=canva.getContext("2d");
                    
                    for (var x = 0.5; x < 500; x += 10) {
                        can.moveTo(x, 0);
                        can.lineTo(x, 200);
                    }
                    for (var y = 0.5; y < 375; y += 10) {
                        can.moveTo(0, y);
                        can.lineTo(300, y);
                    }
                    can.strokeStyle="Red"
                    can.stroke();
                }
                function lineas_libres(){
                    var canva= document.getElementById("canva_l_libre");
                    var can=canva.getContext("2d");
                    
                    can.beginPath();
                    can.moveTo(0,0);
                    can.lineTo(20,50);
                    can.lineTo(50,20);
                    can.lineTo(80,80);
                    can.lineTo(100,50);
                    can.lineTo(150,100);
                    can.lineTo(170,80);
                    can.lineTo(375,190);
                    can.strokeStyle="Blue";
                    can.stroke();
                }
                function lineas_colores(){
                    var canva= document.getElementById("canva_path");
                    var can=canva.getContext("2d");
                    
                    can.beginPath();
                    can.moveTo(0,0);
                    can.lineTo(80,80);
                    can.strokeStyle="red";
                    can.stroke();
                    can.closePath();
                    can.beginPath();
                    can.moveTo(100,80)
                    can.lineTo(200,0);
                    can.strokeStyle="blue";
                    can.stroke();
                    can.closePath();
                }
                function ejemplo(){
                    var canva= document.getElementById("ejemplo_path");
                    var can=canva.getContext("2d");  
                    can.beginPath();
                    can.moveTo(0, 40);
                    can.lineTo(240, 40);
                    can.moveTo(260, 40);
                    can.lineTo(500, 40);
                    can.moveTo(495, 35);
                    can.lineTo(500, 40);
                    can.lineTo(495, 45);
                    can.moveTo(60, 0);
                    can.lineTo(60, 153);
                    can.moveTo(60, 173);
                    can.lineTo(60, 375);
                    can.moveTo(65, 370);
                    can.lineTo(60, 375);
                    can.lineTo(55, 370);
                    can.stroke();
                }
                function fuentes(){
                    var can=document.getElementById("font_text");
                    var cox=can.getContext("2d");
                    cox.font="bold 50px sans-serif";
                    cox.fillText("Hola", 50 , 70);
                    cox.fillText("Mundo" , 50 , 120);
                }
                (function() {

                    var width, height, largeHeader, canvas, ctx, points, target, animateHeader = true;

                    // Main
                    initHeader();
                    initAnimation();
                    addListeners();

                    function initHeader() {
                        width = window.innerWidth;
                        height = window.innerHeight;
                        target = {x: width/2, y: height/2};

                    largeHeader = document.getElementById('large-header');
                    largeHeader.style.height = height+'px';

                    canvas = document.getElementById('demo-canvas');
                    canvas.width = width;
                    canvas.height = height;
                    ctx = canvas.getContext('2d');

                    // create points
                    points = [];
                    for(var x = 0; x < width; x = x + width/20) {
                      for(var y = 0; y < height; y = y + height/20) {
                        var px = x + Math.random()*width/20;
                        var py = y + Math.random()*height/20;
                        var p = {x: px, originX: px, y: py, originY: py };
                        points.push(p);
                            }
                                }

                    // for each point find the 5 closest points
                    for(var i = 0; i < points.length; i++) {
                        var closest = [];
                        var p1 = points[i];
                        for(var j = 0; j < points.length; j++) {
                            var p2 = points[j]
                            if(!(p1 == p2)) {
                                var placed = false;
                                for(var k = 0; k < 5; k++) {
                                    if(!placed) {
                if(closest[k] == undefined) {
                closest[k] = p2;
                                        placed = true;
                                    }
                                }
                            }

                            for(var k = 0; k < 5; k++) {
                                if(!placed) {
                if(getDistance(p1, p2) < getDistance(p1, closest[k])) {
                closest[k] = p2;
                                        placed = true;
                                    }
                                }
                            }
                        }
                    }
                    p1.closest = closest;
                }

                // assign a circle to each point
                for(var i in points) {
                    var c = new Circle(points[i], 2+Math.random()*2, 'rgba(255,255,255,0.3)');
                    points[i].circle = c;
                }
            }

            // Event handling
            function addListeners() {
                if(!('ontouchstart' in window)) {
        window.addEventListener('mousemove', mouseMove);
                }
        window.addEventListener('scroll', scrollCheck);
        window.addEventListener('resize', resize);
            }

            function mouseMove(e) {
                var posx = posy = 0;
                if (e.pageX || e.pageY) {
                    posx = e.pageX;
                    posy = e.pageY;
                }
                else if (e.clientX || e.clientY)    {
                    posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
                    posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
                }
                target.x = posx;
                target.y = posy;
            }

            function scrollCheck() {
                if(document.body.scrollTop > height) animateHeader = false;
                else animateHeader = true;
            }

            function resize() {
                width = window.innerWidth;
                height = window.innerHeight;
                largeHeader.style.height = height+'px';
                canvas.width = width;
                canvas.height = height;
            }

            // animation
            function initAnimation() {
                animate();
                for(var i in points) {
                    shiftPoint(points[i]);
                }
            }

            function animate() {
                if(animateHeader) {
        ctx.clearRect(0,0,width,height);
                for(var i in points) {
                    // detect points in range
        if(Math.abs(getDistance(target, points[i])) < 4000) {
                        points[i].active = 0.3;
        points[i].circle.active = 0.6;
                    } else if(Math.abs(getDistance(target, points[i])) < 20000) {
                        points[i].active = 0.1;
        points[i].circle.active = 0.3;
                    } else if(Math.abs(getDistance(target, points[i])) < 40000) {
                        points[i].active = 0.02;
        points[i].circle.active = 0.1;
                    } else {
                        points[i].active = 0;
        points[i].circle.active = 0;
                    }

                    drawLines(points[i]);
                    points[i].circle.draw();
                }
            }
        requestAnimationFrame(animate);
    }

    function shiftPoint(p) {
        TweenLite.to(p, 1+1*Math.random(), {x:p.originX-50+Math.random()*100,
            y: p.originY-50+Math.random()*100, ease:Circ.easeInOut,
            onComplete: function() {
                shiftPoint(p);
            }});
    }

    // Canvas manipulation
    function drawLines(p) {
        if(!p.active) return;
        for(var i in p.closest) {
            ctx.beginPath();
            ctx.moveTo(p.x, p.y);
            ctx.lineTo(p.closest[i].x, p.closest[i].y);
            ctx.strokeStyle = 'rgba(156,217,249,'+ p.active+')';
            ctx.stroke();
        }
    }

    function Circle(pos,rad,color) {
        var _this = this;

        // constructor
        (function() {
            _this.pos = pos || null;
            _this.radius = rad || null;
            _this.color = color || null;
        })();

        this.draw = function() {
            if(!_this.active) return;
            ctx.beginPath();
            zctx.arc(_this.pos.x, _this.pos.y, _this.radius, 0, 2 * Math.PI, false);
            ctx.fillStyle = 'rgba(156,217,249,'+ _this.active+')';
            ctx.fill();
        };
    }

    // Util
    function getDistance(p1, p2) {
        return Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2);
    }

    })();
